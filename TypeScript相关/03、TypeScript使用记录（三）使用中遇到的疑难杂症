## TypeScriptä½¿ç”¨è®°å½•(ä¸‰) ä½¿ç”¨ä¸­é‡åˆ°çš„ç–‘éš¾æ‚ç—‡

### 01ã€TypeScriptä¸­è§£æ„å‚æ•°çš„ä½¿ç”¨

åœ¨jsä¸­æˆ‘ä»¬å¯ä»¥è§£æ„ä¸€ä¸ªæ•°ç»„ä½œä¸ºå®å‚ä¼ é€’ç»™ä¸€ä¸ªæŒ‡å®šå‚æ•°æ•°é‡çš„å‡½æ•°ä½¿ç”¨ï¼Œå¦‚ä¸‹ä¾‹ï¼š

```js
// å®ä¾‹
function getObj(name, age) {
  return {
    name,
    age,
  };
}
console.log(getObj(...['James', 30]))
// expected output: {name: 'James', age: 30}
```

ä½†åœ¨TSä¸­å¦‚ä½•å¯¹ç»“æ„çš„æ•°ç»„è¿›è¡Œç±»å‹å£°æ˜å´æ˜¯æœ‰ç‚¹è®©äººè¿·æƒ‘çš„

é¦–å…ˆï¼Œå¦‚æœä¸å¯¹ç»“æ„çš„æ•°ç»„è¿›è¡Œç±»å‹å£°æ˜ï¼ŒTSä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼š

>  Error: æ‰©å¼ å‚æ•°å¿…é¡»å…·æœ‰å…ƒç»„ç±»å‹æˆ–ä¼ é€’ç»™ rest å‚æ•°ã€‚ts(2556)
>
> é”™è¯¯åŸå› ï¼šå‡½æ•°æœŸæœ›æ¥å—å·²ç»æŒ‡å®šæ•°é‡ä¸”æŒ‡å®šå£°æ˜ç±»å‹çš„å‚æ•°ï¼Œä½†åœ¨è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„å´æ˜¯æ‰©å¼ å‚æ•°ï¼ˆè§£æ„è¡¨è¾¾å¼ï¼‰

å¦‚ä¸‹ä¾‹ï¼š

```typescript
function getObj(name: string, age: number) {
  return {
    name,
    age,
  };
}

// ä¸‹é¢è¿™æ ·ä½¿ç”¨ä¼šæœ‰é”™è¯¯æç¤º
// â›”ï¸ Error: æ‰©å¼ å‚æ•°å¿…é¡»å…·æœ‰å…ƒç»„ç±»å‹æˆ–ä¼ é€’ç»™ rest å‚æ•°ã€‚ts(2556)
const result = getObj(...['James', 30]);

// è¿™æ ·æ˜¯æ­£å¸¸ä¼ å‚è°ƒç”¨
const result = getObj('James', 30);
```

å¦‚ä½•è¿›è¡Œç±»å‹å£°æ˜ï¼Ÿ

æ–¹æ¡ˆä¸€

ç›´æ¥å°†æ•°ç»„ç±»å‹å£°æ˜ä¸ºå…ƒç»„ç±»å‹ï¼Œæ•°ç»„ä¸­æ¯ä¸€é¡¹çš„ç±»å‹å¯¹åº”äºå‡½æ•°çš„å½¢å‚çš„ç±»å‹ï¼Œå¦‚ä¸‹ä¾‹ï¼š

```typescript
function getObj(name: string, age: number) {
  return {
    name,
    age,
  };
}

const params:[string, number] = ['James', 30]
const result = getObj(...params);
```

æ–¹æ¡ˆäºŒ

é€šè¿‡ `as const` è¯­æ³•å°†æ•°ç»„æ–­è¨€æˆ   `tuple`ï¼Œå¦‚ä¸‹ä¾‹å­

```typescript
function getObj(name: string, age: number) {
  return {
    name,
    age,
  };
}

const result = getObj(...(['James', 30] as const));

// ğŸ‘‡ï¸ const tuple: readonly ["James", 30]
const tuple = ['James', 30] as const;

```

æ–¹æ¡ˆä¸‰

ä¿®æ”¹å‡½æ•°çš„å½¢å‚ä¸ºæ‰©å¼ å‚æ•°å¹¶è¿›è¡Œç±»å‹å£°æ˜ï¼Œå’Œä¸Šé¢ä¸¤ç§æ–¹æ¡ˆä¸åŒçš„è§£å†³æ€è·¯ï¼Œä¿®æ”¹çš„æ˜¯å‡½æ•°çš„å£°æ˜ï¼Œå¦‚ä¸‹ä¾‹

```typescript
function getArr(...args: string[]) {
  return args;
}

const result0 = getArr(...['James', 'Alice', 'Bob', 'Carl']);
```

è¿™ä¸ªæ–¹æ¡ˆæˆ‘ä»¬åœ¨jsä¸­ä¹ŸæŒºå¸¸è§çš„

åœ¨jsä¸­æˆ‘ä»¬ä¼šç»å¸¸ä½¿ç”¨[<u>å‰©ä½™å‚æ•°</u>](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Functions/Rest_parameters#example)å°†ä¸€ä¸ªå‡½æ•°ä¸å®šæ•°é‡çš„<u>å‚æ•°</u>è¡¨ç¤ºä¸ºä¸€ä¸ª<u>æ•°ç»„</u>ã€‚

```js
// ç¤ºä¾‹
function sum(...args) {
  return args.reduce((previous, current) => {
    return previous + current;
  });
}

console.log(sum(1, 2, 3));
// expected output: 6
```

å…³äºå…ƒç»„çš„ç±»å‹å£°æ˜ï¼Œæœ‰ä¸€ç§æ ¹æ®`interface`çš„`value`ç”Ÿæˆ`tuple`çš„æ–¹å¼

```typescript
// interfaceç±»å‹
interface OnGetDataParams {
  page: number;
  onSuccess: () => void;
  onFail: () => void;
}

// è‡ªå®šä¹‰ç±»å‹å·¥å…·
type Lookup<T, K> = K extends keyof T ? T[K] : never;
type TupleFromInterface<T, K extends Array<keyof T>> = { [I in keyof K]: Lookup<T, K[I]> }

type OnGetDataParamsTuple = TupleFromInterface<OnGetDataParams, ['page', 'onSuccess', 'onFail']>
// OnGetDataParamsTuple = [number, () => void, () => void]
```

é¦–å…ˆ`Lookup<T, K>`å·¥å…·æ˜¯æå–å¯¹åº”`key`çš„`value`ç±»å‹

```typescript
// interfaceç±»å‹
interface OnGetDataParams {
  page: number;
  onSuccess: () => void;
  onFail: () => void;
}

type Lookup<T, K> = K extends keyof T ? T[K] : never; 

type Page = Lookup<OnGetDataParams, 'page'>
// type Page = number
```

å…¶æ¬¡æ˜¯éå†å…ƒç»„ç±»å‹

```typescript
type Arr = ['page', 'onSuccess', 'onFail']

type Traverse<K> = {[I in keyof K]: undefined}   

type TraverseArr = Traverse<Arr>
// type TraverseArr = [undefined, undefined, undefined]
```

ä»¥ä¸Šå°±æ˜¯è§£æ„å‚æ•°åœ¨TSä¸­å£°æ˜ä¸ºå…ƒç»„ç±»å‹çš„æ–¹å¼ï¼Œæœ€åè¿˜æ‹“å±•äº†ä¸‹å¦‚ä½•æ ¹æ®æ¥å£ç±»å‹çš„`value`ç”Ÿæˆå…ƒç»„ç±»å‹