## Canvas 与 SVG 的区别

### 一、前言

在现代 **Web** 开发中，**SVG** 和 **Canvas** 是两种常用的原生 **Web** 技术，用于在网页上**绘制和显示图形**，尽管它们都可以用于图形处理，但它们的实现方式、适用场景和优缺点各不相同

- **SVG（Scalable Vector Graphics）**是一种基于 **XML** 的**矢量图形**格式

  - 用于描述**二维矢量图形**，支持动画和交互性

  - **SVG** 的特点是矢量图形可以无限缩放而不失真，这使得它非常适合用于绘制高质量的图形和图标

    使用示例：

    ```html
    <svg width="100" height="100">
      <circle cx="50" cy="50" r="40" stroke="black" stroke-width="3" fill="red" />
    </svg>
    ```

    <!--使用 SVG 创建了一个红色的圆圈，圆心在(50, 50)，半径为40-->

- **Canvas ** 是 **HTML5** 的一部分，是一个用于通过 **JavaScript** 绘制图像的元素

  - **Canvas** 是**基于像素**的，这意味着它操作的是**位图图像**

  - **Canvas** 适用于渲染复杂的动画和图像处理，例如游戏图形、实时数据可视化等

    使用示例：

    ```html
    <canvas id="myCanvas" width="100" height="100"></canvas>
    <script>
      var canvas = document.getElementById('myCanvas');
      var ctx = canvas.getContext('2d');
      ctx.beginPath();
      ctx.arc(50, 50, 40, 0, 2 * Math.PI);
      ctx.stroke();
      ctx.fillStyle = 'red';
      ctx.fill();
    </script>
    ```

    <!--使用 Canvas 绘制了一个红色的圆圈，圆心在(50, 50)，半径为40-->

#### 1.1、SVG和Canvas的区别是什么？

1. **基础原理**：
   - **SVG**：基于 **XML** 的矢量图形
     - 每一个图形元素都是 **DOM**（文档对象模型）的一部分，允许通过 **CSS** 和 **JavaScript** 进行样式和交互控制
   - **Canvas**：基于像素的绘图表面
     - 所有的绘图操作都是通过 **JavaScript** 进行的，绘制结果是立即渲染的位图
   
2. **图像质量**：
   - **SVG**：由于是矢量图形，可以无限放大和缩小而不失真，非常适合用于需要高质量缩放的应用
   - **Canvas**：操作的是位图，放大后可能会出现像素化现象，不适合用于需要高质量缩放的场景

3. **性能**：
   - **SVG**：在处理大量元素或复杂图形时，性能可能会下降，因为每个元素都是 **DOM** 的一部分，需要浏览器进行更多的计算和渲染
   - **Canvas**：由于是基于像素的，适合于处理大量的、复杂的图形和动画，性能较好

4. **交互性**：
   - **SVG**：每个图形元素都是 **DOM** 的一部分，可以直接通过事件监听器进行交互操作
   - **Canvas**：需要手动计算并实现交互逻辑，例如检测鼠标点击位置等

### 二、矢量图与位图的区别

矢量图和位图是两种不同类型的图像格式，各自有其特点和应用场景

- **矢量图**

  - **定义**：矢量图是通过数学公式描述图形的图像格式，它使用线段、曲线和多边形等几何元素来表示图像


  - 特点：

    - **可无限缩放**：矢量图可以无限放大或缩小而不会失真
    - **文件大小较小**：由于使用数学公式描述图像，文件大小相对较小
    - **编辑灵活**：可以轻松修改图形的形状、颜色和大小
    - **适用于印刷和网页设计**：矢量图常用于标志、图标和插图等需要无损缩放的图像


- **位图**

  - **定义**：**位图**（也叫做点阵图，删格图象，像素图）是由像素组成的图像，每个像素都包含颜色和位置信息


  - 特点：

    - **色彩丰富**：位图可以存储丰富的图像细节和颜色信息
    - **文件大小较大**：由于每个像素都需要存储颜色信息，文件大小较大
    - **不可无损放大**：放大位图时会导致图像失真和模糊
    - **适用于照片和复杂图像**：位图常用于照片、实际场景和复杂的图像                


#### 2.1、矢量图的绘制原理

**矢量图**是通过**数学公式**来**描述图形**的，每个图形元素（如线条、曲线、形状）都是用数学方程来定义的，这些方程描述了图形的起点、终点、曲率等属性：

- **例子**：假设你要画一个圆。在矢量图中，这个圆是通过一个数学公式来定义的，

  比如：
  $$
  (x - a)^2 + (y - b)^2 = r^2(x−a)2+(y−b)2=r2
  $$
  

  <!--其中，(a) 和 (b) 是圆心的坐标，(r) 是半径-->

因为矢量图是用数学公式来描述的，所以当放大或缩小图形时，公式会重新计算每个点的位置和形状，然后重新绘制图形，这意味着无论把图形放大多少倍，边缘都会保持清晰和锐利，所以它不会变模糊

相比之下，**位图**是由**像素**组成的，每个**像素**都有**固定**的**位置**和**颜色**，当放大位图时，像素会变得更大，导致图像变得模糊

**总结**：

- **矢量图**：每次缩放时重新绘制，保持清晰
- **位图**：放大时不重新绘制，可能会变模糊

### 三、浏览器绘图底层原理的差异

> **SVG** 中的每个图形标签（如 `<circle>`、`<rect>` 等）都是独立的 **DOM** 对象
>
> **Canvas** 元素本身是 **DOM** 的一部分，然而一旦在Canvas上绘制图形，这些图形就不再是独立的**DOM** 元素，而是 **Canvas** 画布上的一部分

**DOM操作与直接渲染**：

- **SVG**：**SVG** 元素是 **DOM** 的一部分，每个 **SVG** 图形元素都像 **HTML** 元素一样，存在于 **DOM** 树中
  - 这使得它们可以通过 **CSS** 样式和 **JavaScript** 事件直接进行控制
  - 但这也意味着，任何对 **SVG** 元素的修改都==需要 **DOM** 的重新计算和渲染==，这在元素数量巨大或者变动频繁的情况下可能会导致性能问题
- **Canvas**：**Canvas** 提供了一个画布，开发者可以在上面通过 **JavaScript** 绘图 **API** 绘制图像
  - **Canvas** 中的图像不是 **DOM** 元素，它们是==直接在画布上渲染的像素==，这种方式意味着一旦图像被渲染，它就不会再保留其结构化的形态
  - ==所有的更新都需要重新绘制整个画布==，但这种操作直接在像素级别进行，==不涉及 **DOM**==，因此可以更高效地处理复杂动画和频繁更新

**图形复杂性处理**：

- **SVG**：由于是矢量图形，适合处理图形结构复杂、层次多、但变化不频繁的图像
  - **SVG** 的性能瓶颈主要在于其与 **DOM** 的交互，当页面中 **SVG** 元素非常多时，每次的 **DOM** 操作都可能成为性能瓶颈
- **Canvas**：通过即时渲染的方式，能够更好地处理大量动态变化的图形
  - 例如，在游戏或图形模拟中，**Canvas** 能够快速渲染并更新大量的图像帧



###               