## æ­£åˆ™è¡¨è¾¾å¼ç›¸å…³

### ä¸€ã€æ¦‚è¿°

**æ­£åˆ™è¡¨è¾¾å¼**ï¼ˆ**Regular expression** æˆ– **regex** æˆ– **regexp**ï¼‰æ˜¯ä¸€ç»„ç”±å­—æ¯å’Œç¬¦å·ç»„æˆçš„ç‰¹æ®Šæ–‡æœ¬ï¼Œæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥ä»ä¸€ä¸ªåŸºç¡€å­—ç¬¦ä¸²ä¸­æ ¹æ®ä¸€å®šçš„åŒ¹é…è§„åˆ™æŸ¥æ‰¾ã€æ›¿æ¢æ–‡æœ¬ä¸­çš„å­—ç¬¦ä¸²ï¼Œè¿›è¡ŒéªŒè¯è¡¨å•ã€æå–å­—ç¬¦ä¸²ç­‰æ“ä½œ

å‡è®¾æœ‰è¿™æ ·ä¸€ä¸ªç”¨æˆ·å‘½åçš„è§„åˆ™ï¼šç”¨æˆ·ååŒ…å«å­—ç¬¦ã€æ•°å­—ã€ä¸‹åˆ’çº¿å’Œè¿å­—ç¬¦ï¼Œå¹¶é™åˆ¶å­—ç¬¦çš„ä¸ªæ•°ï¼Œé‚£ä¹ˆä¾¿å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ­£åˆ™è¡¨è¾¾å¼æ¥éªŒè¯ä¸€ä¸ªç”¨æˆ·åğŸ‘‡

![Regular expression](https://raw.githubusercontent.com/wanglufei561/picture_repo/master/assets/202401091652842.png)

æ­£åˆ™è¡¨è¾¾å¼æœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š

- **å­—é¢é‡**ï¼š`let reg = /ab+c/`

  ```js
  // å­—é¢é‡å½¢å¼åˆ›å»º
  let reg = /'æ­£åˆ™è¡¨è¾¾å¼'/'åŒ¹é…æ¨¡å¼'  
  
  // ä¾‹å¦‚ï¼š 
  let reg = /^ab$/i  // åŒ¹é…ä»¥aå¼€å¤´bç»“å°¾çš„å­—ç¬¦ä¸²ï¼Œä¸åŒºåˆ†å¤§å°å†™
  ```

- **æ„é€ å‡½æ•°**ï¼š`let reg = new RegExp('ab+c');`

  ```js
  // æ„é€ å‡½æ•°å½¢å¼åˆ›å»º
  let reg = new RegExp('æ­£åˆ™è¡¨è¾¾å¼'ï¼Œ'åŒ¹é…æ¨¡å¼')    
  let reg = new RegExp('^ab$','i') // i è¡¨ç¤ºä¸åŒºåˆ†å¤§å°å†™
  
  // å½“ä½¿ç”¨æ„é€ å‡½æ•°æ—¶å¯ä»¥å°†å˜é‡åµŒå…¥åˆ°æ­£åˆ™è¡¨è¾¾å¼ä¸­
  // ä¾‹å¦‚ï¼š
  const searchTerm = "DYNAMIC_PARAMS"
  // ä½¿ç”¨æ„é€ å‡½æ•°åˆ›å»ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ï¼Œå¹¶ä½¿ç”¨å˜é‡åµŒå…¥
  const pattern = new RegExp(`DYNAMIC_PARAMS\.${searchTerm}`, "g") // g è¡¨ç¤ºå…¨å±€æœç´¢
  
  typeof  reg === 'object', // æ­£åˆ™è¡¨è¾¾å¼æ˜¯ä¸ªå¯¹è±¡
  ```

### äºŒã€æ­£åˆ™è¡¨è¾¾å¼å¸¸ç”¨çš„æ–¹æ³•

- **test()**ï¼š **RegExp** æ–¹æ³•ï¼Œç”¨äºæ£€æµ‹å­—ç¬¦ä¸²æ˜¯å¦åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼ï¼›å¦‚æœåŒ¹é…ï¼Œè¿”å› `true`ï¼Œå¦åˆ™ï¼Œè¿”å› `false`

  ```js
   // ç”¨æ³•ï¼šreg.test(str)
   let reg = /a/  
   reg.test(ab) // true æ£€æŸ¥å­—ç¬¦ä¸²ä¸­æ˜¯å¦æœ‰'a'
  ```

- **exec()**ï¼š**RegExp** æ–¹æ³•ï¼Œç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­æŸ¥æ‰¾åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„å­ä¸²ï¼›å¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå¦åˆ™ï¼Œè¿”å› `null`

  ```js
  // ç”¨æ³•ï¼šreg.exec(str)
  let regex = /hello(\w*)/i;
  let str = 'HelloWorld, helloJavaScript';
  let result = regex.exec(str); // ["helloJavaScript", "JavaScript"]
  // ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯åŒ¹é…çš„æ•´ä¸ªå­ä¸²ï¼Œåé¢çš„å…ƒç´ æ˜¯åŒ¹é…çš„å­ç»„ï¼ˆæ‹¬å·å†…çš„éƒ¨åˆ†ï¼‰
  ```

  åœ¨å…¨å±€æ¨¡å¼ä¸‹ï¼Œ`exec` æ–¹æ³•åœ¨æ¯æ¬¡è°ƒç”¨æ—¶éƒ½ä¼šä»ä¸Šæ¬¡åŒ¹é…åçš„ä½ç½®å¼€å§‹æŸ¥æ‰¾ï¼Œè€Œä¸æ˜¯ä»å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®

  <!--è¿™æ˜¯å› ä¸ºæ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡åœ¨å…¨å±€æ¨¡å¼ä¸‹ä¼šè®°ä½ä¸Šæ¬¡åŒ¹é…çš„ä½ç½® ï¼ˆå¯ä»¥é€šè¿‡ `regex.lastIndex` å±æ€§è·å–ï¼‰-->

  è‹¥æƒ³è¦ä½¿ç”¨ `exec` æ–¹æ³•è·å–æ‰€æœ‰åŒ¹é…çš„å­ä¸²ï¼Œéœ€è¦åœ¨ä¸€ä¸ªå¾ªç¯ä¸­å¤šæ¬¡è°ƒç”¨å®ƒï¼Œç›´åˆ°å®ƒè¿”å› `null`

  ```js
  let regex = /hello(\w*)/ig;
  let str = 'HelloWorld, helloJavaScript';
  let result;
  while ((result = regex.exec(str)) !== null) {
    console.log(result);
  }
  // ["HelloWorld", "World"]
  // ["helloJavaScript", "JavaScript"]
  ```

- **match()**ï¼š**String** æ–¹æ³•ï¼Œç”¨äºæå–å­—ç¬¦ä¸²ä¸­ä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²ï¼Œå¦‚æœæ‰¾åˆ°åŒ¹é…é¡¹ï¼Œè¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œå¦åˆ™ï¼Œè¿”å› `null`

  - é»˜è®¤æ‰¾åˆ°ç¬¬ä¸€ä¸ªç¬¦åˆçš„å°±åœæ­¢æ£€ç´¢

    ```javascript
    const str = "The quick brown fox jumps over the lazy dog.";
    const regex = /(\w+) (\w+)/;
    const result = str.match(regex);
    
    console.log(result);
    // è¾“å‡ºï¼š["The quick", "The", "quick"]
    // result[0] æ˜¯æ•´ä¸ªåŒ¹é…çš„å­—ç¬¦ä¸²
    // result[1] æ˜¯ç¬¬ä¸€ä¸ªæ•è·ç»„ "The"
    // result[2] æ˜¯ç¬¬äºŒä¸ªæ•è·ç»„ "quick"
    
    ```

  - å¯ä»¥è®¾ç½®å…¨å±€åŒ¹é…`/g`ï¼Œ

    ```javascript
    const str = "The quick brown fox jumps over the lazy dog.";
    const regex = /(\w+) (\w+)/g;
    const result = str.match(regex);
    
    console.log(result);
    // è¾“å‡ºï¼š["The quick", "brown fox", "jumps over", "the lazy"]
    // ä»…åŒ…å«æ‰€æœ‰åŒ¹é…é¡¹çš„å­—ç¬¦ä¸²æ•°ç»„ï¼Œä¸åŒ…å«æ•è·ç»„çš„ä¿¡æ¯
    ```

    <!--å½“ `match` æ–¹æ³•å¸¦æœ‰å…¨å±€æ ‡å¿—æ—¶ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŒ¹é…é¡¹çš„æ•°ç»„ï¼Œä½†ä¸åŒ…æ‹¬æ•è·ç»„çš„ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦è·å–æ‰€æœ‰åŒ¹é…é¡¹çš„æ•è·ç»„ä¿¡æ¯ï¼Œåº”è¯¥ä½¿ç”¨ `matchAll` æ–¹æ³•-->

- **matchAll()**ï¼š**String æ–¹æ³•**ï¼Œè¿”å›ä¸€ä¸ªè¿­ä»£å™¨ï¼ŒåŒ…å«æ‰€æœ‰çš„åŒ¹é…ç»“æœï¼Œä¸ `match` ä¸åŒï¼Œ`matchAll` å§‹ç»ˆè¿”å›åŒ…å«æ•è·ç»„çš„è¯¦ç»†ç»“æœ

  ```js
  const str = "The quick brown fox jumps over the lazy dog.";
  const regex = /(\w+) (\w+)/g;
  const matches = str.matchAll(regex);
  
  for (const match of matches) {
    console.log(match);
  }
  // è¾“å‡ºï¼š
  // ["The quick", "The", "quick"]
  // ["brown fox", "brown", "fox"]
  // ["jumps over", "jumps", "over"]
  // ["the lazy", "the", "lazy"]
  ```

- **split()**ï¼š**String æ–¹æ³•**ï¼Œå°†å­—ç¬¦ä¸²æ‹†åˆ†ä¸ºä¸€ä¸ªæ•°ç»„

  ```js
  //ç”¨æ³•ï¼šstr.split(reg)
  let reg = /b/
  let str = 'abc'; 
  str.split(reg)  // ['a', 'c']
  ```

- **search()**ï¼š**String æ–¹æ³•**ï¼Œæ£€ç´¢ä¸æ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›å­ä¸²çš„èµ·å§‹ä½ç½®,æ²¡æœ‰ç¬¦åˆçš„åˆ™è¿”å›-1

  ```js
  //ç”¨æ³•ï¼šstr.search(reg)
  let reg = /a/;
  let str = 'abc';
  str.search(reg) // 1
  ```

- **replace()**ï¼š**String æ–¹æ³•**ï¼Œæ›¿æ¢ä¸€ä¸ªä¸æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å­ä¸²

  ```js
  //ç”¨æ³•ï¼šstr.replace(regï¼ŒnewStr)
  let reg = /(Hello), (\w+)!/
  let str = "Hello, world!";
  
  str.replace(reg, vvvv) // 'vvvvbc'
  // æˆ–è€…
  str.replace(reg, function(match, p1, p2) {
    return `${p1}, wonderful ${p2}!`;
  }); 
  // "Hello, wonderful world!"
  // æ›¿æ¢å‡½æ•°çš„å‚æ•° match æ˜¯æ•´ä¸ªåŒ¹é…çš„å­å­—ç¬¦ä¸²ï¼Œp1 å’Œ p2 åˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªæ•è·ç»„
  ```


### ä¸‰ã€å¸¸è§çš„ä½¿ç”¨ç¤ºä¾‹

#### 3.1ã€æ›¿æ¢å¸¦æœ‰è¾¹ç•Œçš„å•è¯

```javascript
function replaceWholeWord(str, target, replacement) {
    // å¯¹äºä¸­æ–‡å•è¯ï¼Œå•è¯è¾¹ç•Œå¯ä»¥ç”¨ç©ºæ ¼æˆ–æ ‡ç‚¹ç¬¦å·æ¥è¡¨ç¤º
    const regex = new RegExp(`(?<![\\w\\u4e00-\\u9fa5])${target}(?![\\w\\u4e00-\\u9fa5])`, 'g');
    return str.replace(regex, replacement);
}

const result = replaceWholeWord('è¿™æ˜¯ä¸€ä¸ª aæµ‹è¯• å­—ç¬¦ä¸²ã€‚This is a test testString. è¿™æ˜¯ä¸€ä¸ª aæµ‹è¯•å­—ç¬¦ä¸²ã€‚', 'aæµ‹è¯•', ' 11')
console.log(result); // è¿™æ˜¯ä¸€ä¸ª  11 å­—ç¬¦ä¸²ã€‚This is a test testString. è¿™æ˜¯ä¸€ä¸ª aæµ‹è¯•å­—ç¬¦ä¸²ã€‚
```

