## 浏览器的默认行为

### 一、常见的浏览器默认行为

==浏览器的**默认行为**是指在用户与网页交互时，浏览器**自动执行的一些操作**==，例如链接的跳转、表单的提交、鼠标的拖拽等；

有时候，开发人员需要==阻止浏览器的默认行为==，以实现一些特定的功能需求

下面介绍一些常见的浏览器默认行为以及如何阻止它们：

1. 链接的跳转：
   - 当用户点击一个链接时，浏览器会自动跳转到该链接所指向的页面
   - 要阻止这个默认行为，可以通过在事件处理函数中调用 `event.preventDefault()` 方法来实现
2. 表单的提交：
   - 当用户在表单中输入数据并提交时，浏览器会自动将数据发送到服务器
   - 要阻止表单的提交，可以在事件处理函数中调用 `event.preventDefault()` 方法，或者将表单的 `onsubmit` 属性设置为 `return false`
3. 鼠标的拖拽：
   - 当用户拖拽某个元素时，浏览器会自动执行拖拽操作
   - 要阻止拖拽操作，可以在事件处理函数中调用 `event.preventDefault()` 方法
4. 右键菜单的弹出：
   - 当用户在页面上右键点击时，浏览器会自动弹出右键菜单
   - 要阻止右键菜单的弹出，可以在事件处理函数中调用 `event.preventDefault()` 方法，或者将页面的 `oncontextmenu` 属性设置为 `return false`
5. 滚动条的滚动：
   - 当用户使用鼠标滚轮或触摸板滑动时，浏览器会自动滚动页面
   - 要阻止滚动条的滚动，可以在事件处理函数中调用 `event.preventDefault()` 方法，或者将页面的 `onscroll` 属性设置为 `return false`

总的来说，==阻止浏览器的默认行为需要在事件处理函数中调用 `event.preventDefault()` 方法==

但是，在实际开发中，要注意不要过度使用这个方法，以免影响用户体验。在某些情况下，浏览器的默认行为是必须的，例如链接的跳转和表单的提交等

### 二、passive参数

`passive` 参数是用来==优化滚动事件性能的==，当 `passive` 设置为 `true` 时，浏览器将会知道该事件监听函数不会调用 `preventDefault()` 方法，从而进行一些优化操作，==提高滚动事件的性能和流畅度==

例如，在滚动事件的监听函数中，如果调用了 `preventDefault()` 方法，浏览器将无法进行滚动的惯性滑动效果，这会导致用户体验下降。因此，==在监听滚动事件时==，推荐将 `passive` 参数设置为 `true`，以优化性能

<!--需要注意的是，如果 `passive` 设置为 `true`，那么在监听函数中调用 `preventDefault()` 方法是无效的，因为浏览器已经知道该函数不会调用 `preventDefault()` 方法，从而进行了优化-->

#### 2.1、为什么可以提高性能？

将事件的 `passive` 参数设置为 `true` 可以提高滚动事件的性能，主要原因是它==可以减少浏览器的重排和重绘操作==

通常情况下，当我们==监听滚动事件==并在回调函数中执行某些操作时，浏览器会在==每次滚动事件触发时==，执行一次布局计算（Layout）和一次重绘（Paint）操作，这会导致浏览器性能的下降，特别是在高频滚动的场景中

如果在==事件监听函数中==调用了 `preventDefault()` 方法来==阻止默认行为==，则浏览器==还会进行一次布局计算和重绘操作==，以显示出滚动事件的惯性效果

而当我们将事件的 `passive` 参数设置为 `true` 后，==浏览器就知道我们不会在事件监听函数中调用 `preventDefault()` 方法==，从而可以在==滚动事件触发时==，==省略布局计算和重绘操作==，以提高性能

这样可以使得滚动操作更加流畅，特别是在手机端或者高频滚动的场景中，效果更加明显

#### 2.2、除了滚动事件还有哪些事件可以使用

`passive` 参数通常用于优化滚动事件的性能，但它并不是只能在滚动事件中使用。实际上，我们可以在任何支持事件监听的事件上使用 `passive` 参数，以优化事件处理的性能。

除了滚动事件以外，还有一些常见的事件，例如==触摸事件==、==鼠标滚轮事件==、==键盘事件==等，都可以使用 `passive` 参数来优化性能。

不过需要注意的是，并非所有的事件都支持 `passive` 参数，只有在浏览器中明确声明了支持该参数的事件才能使用。

例如，

- 在==触摸事件==中使用 `passive` 参数可以==有效地防止滑动时的卡顿==，提升用户体验。
- 在==鼠标滚轮事件==中使用 `passive` 参数可以==加快滚轮滚动的速度==，使得滚动更加流畅。
- 在==键盘事件==中使用 `passive` 参数可以==优化输入法的响应速度==，提高用户输入的体验。

总之，`passive` 参数可以用于任何支持事件监听的事件中，以优化事件处理的性能，提高用户体验。需要注意的是，在使用 `passive` 参数时，应该根据实际情况选择合适的事件，并进行兼容性测试，以确保代码的正确性和稳定性。

