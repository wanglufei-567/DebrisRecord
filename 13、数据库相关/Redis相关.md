## Redis笔记

### 一、前言

每一项技术的发展都是和大时代的背景息息相关，**==Redis==**的出现便是顺应了**Web**时代发展的需求，那在学习**Redis**的时候，了解下我们为什么需要这门技术还是很有必要的；

**Web1.0时代**

Web1.0的时代，**关系型数据库**受到了较为广泛的关注和应用，原因是因为那时候Web站点基本上访问和并发不高、交互也较少；数据访问量很有限，用一个高性能的单点服务器便可以解决大部分问题。

![image-20220727001146839](https://raw.githubusercontent.com/wanglufei561/picture_repo/master/assets/image-20220727001146839.png)

**Web2.0时代**

随着Web2.0的时代的到来，用户访问量大幅度提升，同时产生了大量的用户数据。加上后来的智能移动设备的普及，所有的互联网平台都面临了巨大的性能挑战。

性能的挑战主要分为两个方面：

- **CPU及内存压力**
- **IO压力**

![image-20220727001427045](https://raw.githubusercontent.com/wanglufei561/picture_repo/master/assets/image-20220727001427045.png)

在这一时代背景下，==**NoSQL**==(缓存数据库)应运而生，它同时具备了**高性能**、**可扩展性强**、**高可用**等优点，受到广泛开发人员和仓库管理人员的青睐。

下面👇看下**NoSQL**是如何在这两个挑战中应用的：

**CPU及内存压力**

**Web3.0**时代的主流系统架构是**分布式架构**，也叫**集群架构**；其主要结构一般为，客户端——>**负载均衡服务器**（反向代理服务器，一般是nginx）——>应用服务器集群（分布式部署）——>数据库，这样架构的目的是为了应对海量访问，但是解决访问量的同时也产生了一些新的问题，下面👇举一个具体🌰：

**session存储的问题**

**`session`**中存储了客户端的用户信息，因为负载均衡的存在，导致同一用户每次请求的服务器可能是集群中的任一服务器，所以集群中的服务器如何共享**`session`**便成了分布式架构的一个关键问题

解决方案：

1. 放到客户端存储cookie中，每次请求都会带着cookie到服务器中

   缺点：不安全

2. 放到文件服务器或数据库中

   缺点：IO效率问题

3. session复制，每台服务器中都存储相同的session

   缺点：数据冗余，浪费内存

4. NoSQL (缓存数据库)中缓存 <!--最优解-->

   优点：数据在内存中，读取速度快；数据结构简单

<img src="https://raw.githubusercontent.com/wanglufei561/picture_repo/master/assets/image-20220727001849738.png" alt="image-20220727001849738" style="zoom:80%;" />

**IO压力**

数据库中业务数据繁杂，io操作效率降低，可以通过数据库分表来提升性能，但是代价是破坏了一定的业务逻辑

解决方案：**频繁操作**的数据放进**缓存数据库**中，提高数据读取的**效率**

<img src="https://raw.githubusercontent.com/wanglufei561/picture_repo/master/assets/image-20220727003348455.png" alt="image-20220727003348455" style="zoom:80%;" />

### 二、 NoSQL数据库

#### 2.1、概述

**NoSQL**(NoSQL = **Not Only SQL** )，意即“不仅仅是SQL”，泛指**非关系型的数据库**。**NoSQL** 不依赖业务逻辑方式存储，而以简单的`key-value`模式存储。因此大大的增加了数据库的扩展能力。

**NoSQL**具有以下特点

- 不遵循SQL标准
- 不支持ACID
- 远超于SQL的性能

**NoSQL适用场景**

- 对数据高并发的读写
- 海量数据的读写
- 对数据高可扩展性的

**NoSQL不适用场景**

- 需要事务支持
- 基于sql的结构化查询存储，处理复杂的关系

#### 2.2、Redis

**Redis**是目前最受欢迎的**NoSQL**数据库之一，**Redis**是一个使用ANSI C编写的开源、包含多种数据结构、支持网络、基于内存、可选持久性的键值对存储数据库，其具备如下特性：

- 基于内存运行，**性能高效**
- 支持分布式，理论上可以无限扩展
- `key-value`存储系统
- 开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API

相比于其他数据库类型，Redis具备的特点是：

- C/S通讯模型
- 单进程单线程模型
- 丰富的数据类型
- 操作具有原子性
- 持久化
- 高并发读写
- 支持lua脚本

<!--上面👆这段看看就好了-->

### 三、Redis具体使用







**keyWords**

Key-value模式、高性能